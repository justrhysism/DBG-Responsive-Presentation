var PERMANENT_URL_PREFIX="./";var SLIDE_CLASSES=["far-past","past","current","next","far-next"];var PM_TOUCH_SENSITIVITY=15;var curSlide;if(typeof document!=="undefined"&&!("classList" in document.createElement("a"))){(function(g){var a="classList",f="prototype",c=(g.HTMLElement||g.Element)[f],e=Object;strTrim=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[f].indexOf||function(j){for(var h=0,k=this.length;h<k;h++){if(h in this&&this[h]===j){return h}}return -1},DOMEx=function(i,h){this.name=i;this.code=DOMException[i];this.message=h},checkTokenAndGetIndex=function(h,i){if(i===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(i)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}return arrIndexOf.call(h,i)},ClassList=function(j){var m=strTrim.call(j.className),h=m?m.split(/\s+/):[];for(var k=0,l=h.length;k<l;k++){this.push(h[k])}this._updateClassName=function(){j.className=this.toString()}},classListProto=ClassList[f]=[],classListGetter=function(){return new ClassList(this)};DOMEx[f]=Error[f];classListProto.item=function(h){return this[h]||null};classListProto.contains=function(h){h+="";return checkTokenAndGetIndex(this,h)!==-1};classListProto.add=function(h){h+="";if(checkTokenAndGetIndex(this,h)===-1){this.push(h);this._updateClassName()}};classListProto.remove=function(i){i+="";var h=checkTokenAndGetIndex(this,i);if(h!==-1){this.splice(h,1);this._updateClassName()}};classListProto.toggle=function(h){h+="";if(checkTokenAndGetIndex(this,h)===-1){this.add(h)}else{this.remove(h)}};classListProto.toString=function(){return this.join(" ")};if(e.defineProperty){var b={get:classListGetter,enumerable:true,configurable:true};try{e.defineProperty(c,a,b)}catch(d){if(d.number===-2146823252){b.enumerable=false;e.defineProperty(c,a,b)}}}else{if(e[f].__defineGetter__){c.__defineGetter__(a,classListGetter)}}}(self))}function getSlideEl(a){if((a<0)||(a>=slideEls.length)){return null}else{return slideEls[a]}}function updateSlideClass(d,a){var b=getSlideEl(d);if(!b){return}if(a){b.classList.add(a)}for(var c in SLIDE_CLASSES){if(a!=SLIDE_CLASSES[c]){b.classList.remove(SLIDE_CLASSES[c])}}}function updateSlides(){for(var a=0;a<slideEls.length;a++){switch(a){case curSlide-2:updateSlideClass(a,"far-past");break;case curSlide-1:updateSlideClass(a,"past");break;case curSlide:updateSlideClass(a,"current");break;case curSlide+1:updateSlideClass(a,"next");break;case curSlide+2:updateSlideClass(a,"far-next");break;default:updateSlideClass(a);break}}triggerLeaveEvent(curSlide-1);triggerEnterEvent(curSlide);window.setTimeout(function(){disableSlideFrames(curSlide-2)},301);enableSlideFrames(curSlide-1);enableSlideFrames(curSlide+2);if(isChromeVoxActive()){speakAndSyncToNode(slideEls[curSlide])}updateHash()}function buildNextItem(){var a=slideEls[curSlide].querySelectorAll(".to-build");if(!a.length){return false}a[0].classList.remove("to-build","");if(isChromeVoxActive()){speakAndSyncToNode(a[0])}return true}function prevSlide(){if(curSlide>0){curSlide--;updateSlides()}}function nextSlide(){if(buildNextItem()){return}if(curSlide<slideEls.length-1){curSlide++;updateSlides()}}function triggerEnterEvent(c){var a=getSlideEl(c);if(!a){return}var d=a.getAttribute("onslideenter");if(d){new Function(d).call(a)}var b=document.createEvent("Event");b.initEvent("slideenter",true,true);b.slideNumber=c+1;a.dispatchEvent(b)}function triggerLeaveEvent(c){var a=getSlideEl(c);if(!a){return}var d=a.getAttribute("onslideleave");if(d){new Function(d).call(a)}var b=document.createEvent("Event");b.initEvent("slideleave",true,true);b.slideNumber=c+1;a.dispatchEvent(b)}function handleTouchStart(a){if(a.touches.length==1){touchDX=0;touchDY=0;touchStartX=a.touches[0].pageX;touchStartY=a.touches[0].pageY;document.body.addEventListener("touchmove",handleTouchMove,true);document.body.addEventListener("touchend",handleTouchEnd,true)}}function handleTouchMove(a){if(a.touches.length>1){cancelTouch()}else{touchDX=a.touches[0].pageX-touchStartX;touchDY=a.touches[0].pageY-touchStartY;a.preventDefault()}}function handleTouchEnd(c){var a=Math.abs(touchDX);var b=Math.abs(touchDY);if((a>PM_TOUCH_SENSITIVITY)&&(b<(a*2/3))){if(touchDX>0){prevSlide()}else{nextSlide()}}cancelTouch()}function cancelTouch(){document.body.removeEventListener("touchmove",handleTouchMove,true);document.body.removeEventListener("touchend",handleTouchEnd,true)}function disableSlideFrames(e){var a=getSlideEl(e);if(!a){return}var c=a.getElementsByTagName("iframe");for(var d=0,b;b=c[d];d++){disableFrame(b)}}function enableSlideFrames(e){var a=getSlideEl(e);if(!a){return}var c=a.getElementsByTagName("iframe");for(var d=0,b;b=c[d];d++){enableFrame(b)}}function disableFrame(a){a.src="about:blank"}function enableFrame(a){var b=a._src;if(a.src!=b&&b!="about:blank"){a.src=b}}function setupFrames(){var b=document.querySelectorAll("iframe");for(var c=0,a;a=b[c];c++){a._src=a.src;disableFrame(a)}enableSlideFrames(curSlide);enableSlideFrames(curSlide+1);enableSlideFrames(curSlide+2)}function numberSlides(){for(var a=0;a<slideEls.length;a++){slideEls[a].setAttribute("data-slide-number",a)}}function setupInteraction(){var a=document.createElement("div");a.className="slide-area";a.id="prev-slide-area";a.addEventListener("click",prevSlide,false);document.querySelector("section.slides").appendChild(a);var a=document.createElement("div");a.className="slide-area";a.id="next-slide-area";a.addEventListener("click",nextSlide,false);document.querySelector("section.slides").appendChild(a);document.body.addEventListener("touchstart",handleTouchStart,false)}function isChromeVoxActive(){if(typeof(cvox)=="undefined"){return false}else{return true}}function speakAndSyncToNode(a){if(!isChromeVoxActive()){return}cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,true);cvox.ChromeVox.navigationManager.syncToNode(a);cvox.ChromeVoxUserCommands.finishNavCommand("");var b=a;while(b.firstChild){b=b.firstChild}cvox.ChromeVox.navigationManager.syncToNode(b)}function speakNextItem(){if(!isChromeVoxActive()){return}cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,true);cvox.ChromeVox.navigationManager.next(true);if(!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(),slideEls[curSlide])){var a=slideEls[curSlide];while(a.firstChild){a=a.firstChild}cvox.ChromeVox.navigationManager.syncToNode(a);cvox.ChromeVox.navigationManager.next(true)}cvox.ChromeVoxUserCommands.finishNavCommand("")}function speakPrevItem(){if(!isChromeVoxActive()){return}cvox.ChromeVox.navigationManager.switchToStrategy(cvox.ChromeVoxNavigationManager.STRATEGIES.LINEARDOM,0,true);cvox.ChromeVox.navigationManager.previous(true);if(!cvox.DomUtil.isDescendantOfNode(cvox.ChromeVox.navigationManager.getCurrentNode(),slideEls[curSlide])){var a=slideEls[curSlide];while(a.lastChild){a=a.lastChild}cvox.ChromeVox.navigationManager.syncToNode(a);cvox.ChromeVox.navigationManager.previous(true)}cvox.ChromeVoxUserCommands.finishNavCommand("")}function getCurSlideFromHash(){var a=parseInt(location.hash.substr(1));if(a){curSlide=a-1}else{curSlide=0}}function updateHash(){location.replace("#"+(curSlide+1))}function handleBodyKeyDown(a){switch(a.keyCode){case 39:case 13:case 32:case 34:nextSlide();a.preventDefault();break;case 37:case 8:case 33:prevSlide();a.preventDefault();break;case 40:if(isChromeVoxActive()){speakNextItem()}else{nextSlide()}a.preventDefault();break;case 38:if(isChromeVoxActive()){speakPrevItem()}else{prevSlide()}a.preventDefault();break}}function addEventListeners(){document.addEventListener("keydown",handleBodyKeyDown,false)}function addPrettify(){var b=document.querySelectorAll("pre");for(var c=0,a;a=b[c];c++){if(!a.classList.contains("noprettyprint")){a.classList.add("prettyprint")}}var a=document.createElement("script");a.type="text/javascript";a.src=PERMANENT_URL_PREFIX+"scripts/prettify.min.js";a.onload=function(){prettyPrint()};document.body.appendChild(a)}function addFontStyle(){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|Droid+Sans+Mono";document.body.appendChild(a)}function addGeneralStyle(){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href=PERMANENT_URL_PREFIX+"stylesheets/styles.css";document.body.appendChild(a);var a=document.createElement("meta");a.name="apple-mobile-web-app-capable";a.content="yes";document.querySelector("head").appendChild(a)}function makeBuildLists(){for(var a=curSlide,e;e=slideEls[a];a++){var c=e.querySelectorAll(".build > *");for(var d=0,b;b=c[d];d++){if(b.classList){b.classList.add("to-build")}}}}function handleDomLoaded(){slideEls=document.querySelectorAll("section.slides > article");setupFrames();numberSlides();addFontStyle();addGeneralStyle();addPrettify();addEventListeners();updateSlides();setupInteraction();makeBuildLists();document.body.classList.add("loaded")}function initialize(){getCurSlideFromHash();if(window._DEBUG){PERMANENT_URL_PREFIX="../"}if(window._DCL){handleDomLoaded()}else{document.addEventListener("DOMContentLoaded",handleDomLoaded,false)}}if(!window._DEBUG&&document.location.href.indexOf("?debug")!==-1){document.addEventListener("DOMContentLoaded",function(){window._DCL=true},false);window._DEBUG=true;var script=document.createElement("script");script.type="text/javascript";script.src="../slides.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(script,s);s.parentNode.removeChild(s)}else{initialize()};